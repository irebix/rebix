<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>元素对决</title>
    <style>
        html,
        body {
            background: #000;
            width: 100%;
            height: 100%;
            overflow: hidden; /* 隐藏全局滚动条 */
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        .hidden {
            display: none !important;
        }
        #container {
            overflow-y: auto; /* 使整个容器可滚动 */
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center; /* 水平居中 */
			position: relative;
        }

        div#gameContainer {
            background: transparent !important;
            position: relative;
            height: 70vh; /* 占据视窗的65% */
            width: 100%;
            display: flex;
            justify-content: center; /* 水平居中 */
            align-items: center; /* 垂直居中 */
            margin-top: 10vh; /* 为导航栏腾出空间 */
        }

        div#gameContainer canvas {
            width: 100%;
            height: 100%;
        }

        div#gameContainer canvas[data-pixel-art="true"] {
            image-rendering: optimizeSpeed;
            image-rendering: -webkit-crisp-edges;
            image-rendering: -moz-crisp-edges;
            image-rendering: -o-crisp-edges;
            image-rendering: crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: optimize-contrast;
            image-rendering: pixelated;
            -ms-interpolation-mode: nearest-neighbor;
        }

		#title-arrow-box {
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 10vh;
		}

		/* 标题样式 */
		#imageTitle {
            color: rgb(200, 200, 200);
            text-align: center;
            font-size: 2rem;
            margin-bottom: 20px;
        }
		#down-arrow-concept {
			position: relative;
			margin: 0 auto;
			width: 0;
			height: 0;
			border-left: 20px solid transparent;
			border-right: 20px solid transparent;
			border-top: 20px solid rgb(200, 200, 200);
			cursor: pointer;
			animation: floatArrow 2s ease-in-out infinite;
		}

		@keyframes floatArrow {
			0%, 100% {
				transform: translateY(0);
			}
			50% {
				transform: translateY(10px);
			}
		}

        #imageContainer {
            padding: 0 0; /* 移除两边的边框 */
            height: auto; 
            width: 65%;
			display: grid; /* 使用grid布局 */
			grid-template-columns: repeat(2, 1fr); /* 定义两列 */
			gap: 10px; /* 图片之间的间距 */
            padding-bottom: 5vh;
			align-items: center;
        }

		#imageContainer img {
            width: 100%;
            max-width: 100%; /* 确保图片在网格中占满 */
            margin-bottom: 0.1vh;
    	}
		#imageContainer img:first-child {
            grid-column: span 2; /* 第一张图片占据两列 */
    	}
        footer {
            width: 100%;
            text-align: center;
            padding: 10px 0;
            background: #000;
            color: rgb(200, 200, 200);
            position: relative;
            bottom: 0;
        }

        /* 导航栏样式 */
        #right-nav, #left-nav {
            position: absolute;
            top: 20px;
            padding: 10px;
            z-index: 3;
            font-size: 18px;
            cursor: pointer;
            color: rgb(200, 200, 200);
            text-decoration: none;
        }

        #right-nav {
            right: calc(100% * 0.2);
        }

        #left-nav {
            left: calc(100% * 0.2);
        }

        #right-nav a, #left-nav a {
            color: inherit;
            text-decoration: none;
        }

        #left-nav a:hover {
            color: #555;
        }
        
        #right-nav a {
            position: relative; /* 确保伪元素相对于链接进行定位 */
            text-decoration: none; /* 移除默认的下划线 */
            color: inherit; /* 保持原有的文字颜色 */
        }

        #right-nav a::after {
            content: '';
            position: absolute;
            bottom: -2px; /* 调整下划线的位置 */
            left: 0;
            width: 100%;
            height: 2px;
            background-color: currentColor; /* 使用当前文字颜色 */
            border-radius: 2px; /* 可选：添加圆角效果 */
            transition: transform 0.3s ease; /* 添加过渡效果 */
            transform: scaleX(0); /* 初始状态下隐藏下划线 */
        }

        #right-nav a:hover::after {
            transform: scaleX(1); /* 悬停时显示下划线 */
        }

        #right-nav a.active::after {
            transform: scaleX(1); /* 选中态下显示下划线 */
        }

        #right-nav ul, #left-nav ul {
            list-style-type: none;
            padding: 0;
        }

        #right-nav ul li, #left-nav ul li {
            display: inline;
            margin: 0 10px;
        }
		@media (max-aspect-ratio: 16/10) {
            
			#right-nav {
				top: 20px;
				right: 0; /* 页面宽度的15% */
				padding: 10px;
			}
			#left-nav {
				top: 20px;
				left: 0; /* 页面宽度的15% */
				padding: 10px;
			}
			#imageContainer {
				gap: 5px;
				width: 100%
			}                     
            div#gameContainer {
                background: transparent !important;
                position: relative;
                height: 70vh; /* 占据视窗的65% */
                width: 100%;
                display: flex;
                justify-content: center; /* 水平居中 */
                align-items: center; /* 垂直居中 */
                margin-top: 15vh; /* 为导航栏腾出空间 */
            }
		}
        @media (max-width: 800px), (max-height: 800px) {
        }

    </style>
</head>

<body>
    <div id="container">
		<nav id="left-nav">
			<ul>
				<li><a id="refresh-page" href="/">马克笔</a></li>
			</ul>
		</nav>
        <nav id="right-nav">
            <ul>
                <li><a class="scroll-link" href="/concept/index.html">概念设计</a></li>
                <li><a class="scroll-link" href="/illustration/index.html">插画设计</a></li>
                <li><a class="scroll-link active" href="/elementduel/index.html">独立游戏</a></li>
            </ul>
        </nav>
		
        <div id="gameContainer">
            <canvas id="unity-canvas" data-pixel-art="false"></canvas>
            <script src="Build/ElementDuelWebGL.loader.js"></script>
            <script>
                var canvas = document.querySelector("#unity-canvas");
                var config = {
                    dataUrl: "Build/ElementDuelWebGL.data.unityweb",
                    frameworkUrl: "Build/ElementDuelWebGL.framework.js.unityweb",
                    codeUrl: "Build/ElementDuelWebGL.wasm.unityweb",
                    streamingAssetsUrl: "StreamingAssets",
                    companyName: "16Grid",
                    productName: "ElementDuel",
                    productVersion: "2.3.1",
                };
                var scaleToFit;
                try {
                    scaleToFit = !!JSON.parse("true");
                } catch (e) {
                    scaleToFit = true;
                }
                var progressBarText = null; // 初始化为 null，确保只有一个元素被创建
                var progressBarMessage = null; // 初始化为 null，确保只有一个元素被创建

                function progressHandler(progress) {
                    var percent = (progress * 100).toFixed(2) + '%'; // 保留两位小数
                    canvas.style.background = 'linear-gradient(to right, white, white ' + percent + ', transparent ' + percent + ', transparent) no-repeat center';
                    canvas.style.backgroundSize = '80% 1rem'; // 缩短进度条长度至80%的容器宽度

                    if (!progressBarText) {
                        progressBarText = document.createElement('div');
                        progressBarText.style.position = 'absolute';
                        progressBarText.style.top = 'calc(50% - 3rem)'; // 调整位置，使其位于进度条正上方
                        progressBarText.style.left = '50%';
                        progressBarText.style.transform = 'translateX(-50%)';
                        progressBarText.style.color = 'white';
                        progressBarText.style.fontSize = '2rem'; // 增大字体大小
                        progressBarText.style.textAlign = 'center';
                        progressBarText.style.width = '100%';
                        progressBarText.style.height = '3rem'; // 调整高度以适应字体大小
                        progressBarText.style.lineHeight = '3rem';
                        progressBarText.style.zIndex = '1';
                        canvas.parentElement.appendChild(progressBarText);
                    }

                    if (!progressBarMessage) {
                        progressBarMessage = document.createElement('div');
                        progressBarMessage.style.position = 'absolute';
                        progressBarMessage.style.top = 'calc(50% + 1rem)'; // 调整位置，使其位于进度条下方
                        progressBarMessage.style.left = '50%';
                        progressBarMessage.style.transform = 'translateX(-50%)';
                        progressBarMessage.style.color = 'white';
                        progressBarMessage.style.fontSize = '1rem'; // 设置字体大小
                        progressBarMessage.style.textAlign = 'center';
                        progressBarMessage.style.width = '100%';
                        progressBarMessage.style.height = '1.5rem'; // 调整高度以适应字体大小
                        progressBarMessage.style.lineHeight = '1.5rem';
                        progressBarMessage.style.zIndex = '1';
                        progressBarMessage.textContent = '正在进入元素世界...（tips：移动端横屏效果更佳）';
                        canvas.parentElement.appendChild(progressBarMessage);
                    }

                    progressBarText.textContent = percent;

                    if (progress >= 1) {
                        // 当进度完成时，移除百分比显示和提示信息
                        progressBarText.parentNode.removeChild(progressBarText);
                        progressBarText = null; // 重置变量，确保下次可以重新创建

                        progressBarMessage.parentNode.removeChild(progressBarMessage);
                        progressBarMessage = null; // 重置变量，确保下次可以重新创建
                    }
                }

                function onResize() {
                    var container = canvas.parentElement;
                    var w;
                    var h;

                    var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                    var isLandscape = window.innerWidth > window.innerHeight;

                    if (isMobile && isLandscape) {
                        h = window.innerHeight * 1; // 占据视窗的100%
                        w = h * (16 / 9); // 保持16:9的宽高比
                    } else {
                        if (scaleToFit) {
                            w = window.innerWidth;
                            h = window.innerHeight * 0.70; // 占据视窗的70%

                            var r = 1080 / 1920;

                            if (w * r > h) {
                                w = Math.min(w, Math.ceil(h / r));
                            }
                            h = Math.floor(w * r);
                        } else {
                            w = 1920;
                            h = 1080;
                        }
                    }

                    container.style.width = canvas.style.width = w + "px";
                    container.style.height = canvas.style.height = h + "px";
                }

                createUnityInstance(canvas, config, progressHandler).then(function (instance) {
                    canvas = instance.Module.canvas;
                    onResize();
                });

                window.addEventListener('resize', onResize);
                onResize();

                if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                    // Mobile device style: fill the whole browser client area with the game canvas:
                    const meta = document.createElement('meta');
                    meta.name = 'viewport';
                    meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
                    document.getElementsByTagName('head')[0].appendChild(meta);
                }

                document.getElementById('down-arrow-concept').addEventListener('click', function() {
                    const imageContainer = document.getElementById('imageContainer');
                    if (imageContainer) {
                        imageContainer.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            </script>
        </div>
		<div id="title-arrow-box">
			<h2 id="imageTitle">美术概念</h2>
			<div id="down-arrow-concept"></div>
		</div>
        <div id="imageContainer">
            <img src="../img/e1.jpg" alt="Concept Art 1" loading="lazy">
            <img src="../img/e2.jpg" alt="Concept Art 2" loading="lazy">
            <img src="../img/e3.jpg" alt="Concept Art 3" loading="lazy">
            <img src="../img/e4.jpg" alt="Concept Art 4" loading="lazy">
            <img src="../img/e5.jpg" alt="Concept Art 5" loading="lazy">
            <img src="../img/e6.jpg" alt="Concept Art 6" loading="lazy">
            <img src="../img/e7.jpg" alt="Concept Art 7" loading="lazy">
        </div>
        <footer>
            <p>© 2024 Rebix</p>
        </footer>
    </div>
</body>
<script>
    document.getElementById('down-arrow-concept').addEventListener('click', function() {
        const imageContainer = document.getElementById('imageContainer');
        if (imageContainer) {
            imageContainer.scrollIntoView({ behavior: 'smooth' });
        }
    });
</script>
<script>
    function checkOrientation() {
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const isLandscape = window.innerWidth > window.innerHeight;
        const leftNav = document.getElementById('left-nav');
        const rightNav = document.getElementById('right-nav');
        const gameContainer = document.getElementById('gameContainer');

        if (isMobile && isLandscape) {
            if (leftNav) leftNav.style.display = 'none';
            if (rightNav) rightNav.style.display = 'none';
            if (gameContainer) gameContainer.style.marginTop = '0';
        } else {
            if (leftNav) leftNav.style.display = 'block';
            if (rightNav) rightNav.style.display = 'block';
            if (gameContainer) gameContainer.style.marginTop = '15vh'; // 恢复原来的 margin-top
        }
    }

    window.addEventListener('resize', checkOrientation);
    window.addEventListener('load', checkOrientation);
</script>
</html>