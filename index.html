<!DOCTYPE html>
<html lang="zh">
<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>马克笔的作品集</title>
    <link rel="icon" href="https://oss.rebix.cn/img/favicon.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="styles.css">
    <link rel="preload" href="https://oss.rebix.cn/img/e00.jpg" as="image">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <script>
        if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            // Mobile device style: set the viewport to scale the text size
            const meta = document.createElement('meta');
            meta.name = 'viewport';
            meta.content = 'width=device-width, initial-scale=0.65, user-scalable=no';
            document.getElementsByTagName('head')[0].appendChild(meta);
        }
    </script>
</head>

<body>
    <nav id="main-nav">
        <div id="left-nav">
            <ul>
                <li><a id="refresh-page"
                        onclick="window.scrollTo(0, 0); window.location.reload(); return false;">马克笔</a></li>
            </ul>
        </div>
        <div id="right-nav">
            <ul>
                <li><a class="scroll-link" data-target="project">游戏项目</a></li>
                <li><a class="scroll-link" data-target="concept">概念设计</a></li>
                <li><a class="scroll-link" data-target="illustration">插画设计</a></li>
                <li><a class="scroll-link" data-target="tools">工具开发</a></li>
            </ul>
        </div>
    </nav>

    <header style="background-color: #000;">
        <h1 class="fade-in-up-center">傅宇帆</h1>
        <div id="tagline" class="fade-in-up-center">设计 · 编程 · 插画</div>
        <div id="down-arrow"></div>
        <img src="https://oss.rebix.cn/img/e00.jpg" alt="Main Image" id="fullscreen-image" style="filter: brightness(0.7) blur(0.5px);" >
    </header>

    <section id="project">
        <h2>游戏项目</h2>
        <div class="project-container">
            <div class="project-row">
                <a href="../elementduel/index.html">
                    <img src="https://oss.rebix.cn/img/e1.jpg" alt="Project 1" loading="lazy" class="main-img" >
                    <img src="https://oss.rebix.cn/img/e1h.jpg" alt="Project 1 Hover" loading="lazy" class="hover-img" >
                </a>
                <a href="../elementduel/index.html" class="project-description">
                    <p>元素对决</p>
                    <p>独立开发，基于Unity3D的跨平台对战卡牌游戏</p>
                    <button class="learn-more-btn">在线试玩</button>
                </a>
            </div>
            <div class="project-row reverse">
                <a href="../brawlstars/index.html">
                    <img src="https://oss.rebix.cn/img/bs1.jpg" alt="Project 2" loading="lazy" class="main-img" >
                    <img src="https://oss.rebix.cn/img/bs1h.jpg" alt="Project 2 Hover" loading="lazy" class="hover-img" >
                </a>
                <a href="../brawlstars/index.html" class="project-description">
                    <p>荒野乱斗</p>
                    <p>市场美宣图，漫画</p>
                    <button class="learn-more-btn">了解更多</button>
                </a>
            </div>
            <div class="project-row">
                <a href="../journey/index.html">
                    <img src="https://oss.rebix.cn/img/j1.jpg" alt="Project 3" loading="lazy" class="main-img" >
                    <img src="https://oss.rebix.cn/img/j1h_2.jpg" alt="Project 3 Hover" loading="lazy" class="hover-img" >
                </a>
                <a href="../journey/index.html" class="project-description">
                    <p>代号：旅程</p>
                    <p>概念设计，插画设计，资产输出，与引擎工具开发</p>
                    <button class="learn-more-btn">了解更多</button>
                </a>
            </div>
        </div>
    </section>

    <section id="concept">
        <h2>概念设计</h2>
        <div class="h2-tagline"><a href="/concept/index.html">查看更多</a></div>
        <div class="img-gallery">
            <a class="two-per-row"><img src="https://oss.rebix.cn/img/e2.jpg" alt="Concept Art 1" loading="lazy" ></a>
            <a class="two-per-row"><img src="https://oss.rebix.cn/img/bs2.jpg" alt="Concept Art 2" loading="lazy" ></a>

            <a class="four-per-row"><img src="https://oss.rebix.cn/img/m1.jpg" alt="New Concept Art 2" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/m2.jpg" alt="New Concept Art 3" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/m3.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/m4.jpg" alt="New Concept Art 4" loading="lazy" ></a>
                    <!-- 使用 iframe 嵌入 noob.html -->
            <!-- <div a class="four-per-row marmoset-container">
                <iframe  src="/3d/breader/breader.html" frameborder="0" scrolling="no"></iframe>
            </div> -->
            <!-- <a class="four-per-row"><img src="/img/muff1.jpg" alt="New Concept Art 1" loading="lazy" ></a> -->
        </div>
    </section>

    <section id="illustration">
        <h2>插画设计</h2>
        <div class="h2-tagline"><a href="/illustration/index.html">查看更多</a></div>
        <div class="img-gallery">
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/bs7.jpg" alt="New Concept Art 3" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/bs10.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/bs3.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/bs9.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/screenshot_7.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/screenshot_2.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/screenshot_3.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/screenshot_4.jpg" alt="New Concept Art 4" loading="lazy" ></a>
            
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/e8.jpg" alt="Concept Art 1" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/e9.jpg" alt="Concept Art 2" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/e10.jpg" alt="New Concept Art 1" loading="lazy" ></a>
            <a class="four-per-row"><img src="https://oss.rebix.cn/img/e11.jpg" alt="New Concept Art 2" loading="lazy" ></a>
        </div>
    </section>

    <!-- <section id="tools">
        <h2>工具开发</h2>
        <div class="video-container">
            <video id="tool-demo-video" controls muted src="videos/引擎工具演示1080p.mp4" alt="Tool Demo Video"
                loading="lazy">
                Your browser does not support the video tag.
            </video>
            <div class="tool-description">
                <p>Unity实时预览PS图层＆一键切换地图</p>
                <p>为方便检查武器在实际游戏中的效果，包括渲染分辨率、动作、背景契合度等要素，为目的制作的脚本</p>
                <p>主要功能：</p>
                <p>1. PS一键保存后，Unity内同步显示修改效果<br>2. 一键切换生态地图，方便对照武器在各生态下效果。<br></p>
            </div>
        </div>
    </section> -->

    <!-- 图片预览遮罩层 -->
    <div id="image-preview" style="display: none;">
        <div id="preview-container">
            <img id="preview-image" src="" alt="Image Preview">
            <div id="left-arrow" class="arrow">&lt;</div>
            <div id="right-arrow" class="arrow">&gt;</div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>© 2024 傅宇帆</p>
            <a href="mailto:irebix@qq.com">irebix@qq.com</a>
        </div>
        <p class="beian-info">
            <a href="https://beian.miit.gov.cn/" target="_blank">沪ICP备2024070004号</a>
            <a href="https://beian.mps.gov.cn/#/query/webSearch?code=31011002006540" rel="noreferrer" target="_blank">
                <img src="https://oss.rebix.cn/img/police-icon.png" alt="Police Icon" class="beian-icon" >沪公网安备31011002006540
            </a>
        </p>
    </footer>
</body>
<script>
    document.querySelectorAll('.img-gallery img:not(.no-preview)').forEach((img, index, array) => {
        img.addEventListener('click', () => {
            document.getElementById('preview-image').src = img.src;
            document.getElementById('image-preview').style.display = 'flex';
        });
    });

    document.getElementById('left-arrow').addEventListener('click', () => {
        const currentSrc = document.getElementById('preview-image').src;
        const images = Array.from(document.querySelectorAll('.img-gallery img'));
        const currentIndex = images.findIndex(img => img.src === currentSrc);
        const prevIndex = (currentIndex - 1 + images.length) % images.length;
        document.getElementById('preview-image').src = images[prevIndex].src;
    });

    document.getElementById('right-arrow').addEventListener('click', () => {
        const currentSrc = document.getElementById('preview-image').src;
        const images = Array.from(document.querySelectorAll('.img-gallery img'));
        const currentIndex = images.findIndex(img => img.src === currentSrc);
        const nextIndex = (currentIndex + 1) % images.length;
        document.getElementById('preview-image').src = images[nextIndex].src;
    });

    document.getElementById('image-preview').addEventListener('click', (event) => {
        if (event.target.id === 'image-preview') {
            document.getElementById('image-preview').style.display = 'none';
        }
    });
    // 处理所有带有 'scroll-link' 类的链接的点击事件
    document.querySelectorAll('.scroll-link').forEach(link => {
        link.addEventListener('click', function (event) {
            event.preventDefault(); // 阻止链接默认行为
            const targetId = link.getAttribute('data-target');
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

    // 处理 'down-arrow' 的点击事件，滚动到页面的第一个 section 元素
    document.getElementById('down-arrow').addEventListener('click', function () {
        const firstSection = document.querySelector('section'); // 获取页面中的第一个section元素
        if (firstSection) {
            firstSection.scrollIntoView({ behavior: 'smooth' });
        }
    });

    // 刷新页面的事件处理器
    document.getElementById('refresh-page').addEventListener('click', function (event) {
        event.preventDefault(); // 阻止链接默认行为
        window.location.reload(); // 刷新页面
    });

    //悬停显示图片 
    document.querySelectorAll('.img-gallery img:not(.no-preview)').forEach((img, index, array) => {
        img.addEventListener('click', () => {
            document.getElementById('preview-image').src = img.src;
            document.getElementById('image-preview').style.display = 'flex';
        });
    });

    document.getElementById('left-arrow').addEventListener('click', () => {
        const currentSrc = document.getElementById('preview-image').src;
        const images = Array.from(document.querySelectorAll('.img-gallery img'));
        const currentIndex = images.findIndex(img => img.src === currentSrc);
        const prevIndex = (currentIndex - 1 + images.length) % images.length;
        document.getElementById('preview-image').src = images[prevIndex].src;
    });

    document.getElementById('right-arrow').addEventListener('click', () => {
        const currentSrc = document.getElementById('preview-image').src;
        const images = Array.from(document.querySelectorAll('.img-gallery img'));
        const currentIndex = images.findIndex(img => img.src === currentSrc);
        const nextIndex = (currentIndex + 1) % images.length;
        document.getElementById('preview-image').src = images[nextIndex].src;
    });

    document.getElementById('image-preview').addEventListener('click', (event) => {
        if (event.target.id === 'image-preview') {
            document.getElementById('image-preview').style.display = 'none';
        }
    });

    // 处理所有带有 'scroll-link' 类的链接的点击事件
    document.querySelectorAll('.scroll-link').forEach(link => {
        link.addEventListener('click', function (event) {
            event.preventDefault(); // 阻止链接默认行为
            const targetId = link.getAttribute('data-target');
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

    // 处理 'down-arrow' 的点击事件，滚动到页面的第一个 section 元素
    document.getElementById('down-arrow').addEventListener('click', function () {
        const firstSection = document.querySelector('section'); // 获取页面中的第一个section元素
        if (firstSection) {
            firstSection.scrollIntoView({ behavior: 'smooth' });
        }
    });

    // 刷新页面的事件处理器
    document.getElementById('refresh-page').addEventListener('click', function (event) {
        event.preventDefault(); // 阻止链接默认行为
        window.location.reload(); // 刷新页面
    });

    // 悬停显示hover图片 
    document.querySelectorAll('.project-row').forEach(row => {
        const mainImg = row.querySelector('.main-img');
        const hoverImg = row.querySelector('.hover-img');
        const description = row.querySelector('.project-description');

        const setHoverImgSize = () => {
            const mainImgRect = mainImg.getBoundingClientRect();
            hoverImg.style.width = `${mainImgRect.width}px`;
            hoverImg.style.height = `${mainImgRect.height}px`;
            hoverImg.style.top = `${mainImgRect.top - row.getBoundingClientRect().top}px`;
            hoverImg.style.left = `${mainImgRect.left - row.getBoundingClientRect().left}px`;
        };

        const onImageLoad = () => {
            setHoverImgSize();
            mainImg.removeEventListener('load', onImageLoad);
        };

        if (mainImg.complete) {
            setHoverImgSize();
        } else {
            mainImg.addEventListener('load', onImageLoad);
        }

        row.addEventListener('mouseenter', () => {
            setHoverImgSize();
            hoverImg.style.opacity = 1;
        });

        row.addEventListener('mouseleave', () => {
            hoverImg.style.opacity = 0;
        });

        // 在页面加载和窗口大小改变时设置悬停图片的尺寸
        window.addEventListener('load', setHoverImgSize);
        window.addEventListener('resize', setHoverImgSize);
    });
    //自动播放视频
    document.addEventListener('DOMContentLoaded', function () {
        const video = document.getElementById('tool-demo-video');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    video.play();
                } else {
                    video.pause();
                }
            });
        }, {
            threshold: 0.5 // 当视频有50%可见时触发
        });

        observer.observe(video);
    });
    document.addEventListener('DOMContentLoaded', function () {
        const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const projectRows = document.querySelectorAll('.project-row');

        const setHoverImgSize = (mainImg, hoverImg, row) => {
            const mainImgRect = mainImg.getBoundingClientRect();
            hoverImg.style.width = `${mainImgRect.width}px`;
            hoverImg.style.height = `${mainImgRect.height}px`;
            hoverImg.style.top = `${mainImgRect.top - row.getBoundingClientRect().top}px`;
            hoverImg.style.left = `${mainImgRect.left - row.getBoundingClientRect().left}px`;
        };

        if (isMobile) {
            const observerOptions = {
                root: null,
                rootMargin: '-25% 0px -25% 0px', // 调整触发时机，使得元素中心进入视口时触发
                threshold: 0.7 // 当元素有50%可见时触发
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const hoverImg = entry.target.querySelector('.hover-img');
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                        if (hoverImg) {
                            hoverImg.style.opacity = 1;
                        }
                    } else {
                        entry.target.classList.remove('in-view');
                        if (hoverImg) {
                            hoverImg.style.opacity = 0;
                        }
                    }
                });
            }, observerOptions);

            projectRows.forEach(row => {
                observer.observe(row);
            });

            // 禁用点击事件触发 hover img 显示
            projectRows.forEach(row => {
                row.addEventListener('click', (event) => {
                    const hoverImg = row.querySelector('.hover-img');
                    if (hoverImg && event.target !== hoverImg) {
                        hoverImg.style.opacity = 0;
                    }
                });
            });
        } else {
            // 仅在非移动设备上应用悬停效果
            projectRows.forEach(row => {
                const mainImg = row.querySelector('.main-img');
                const hoverImg = row.querySelector('.hover-img');

                const onImageLoad = () => {
                    setHoverImgSize(mainImg, hoverImg, row);
                    mainImg.removeEventListener('load', onImageLoad);
                };

                if (mainImg.complete) {
                    setHoverImgSize(mainImg, hoverImg, row);
                } else {
                    mainImg.addEventListener('load', onImageLoad);
                }

                row.addEventListener('mouseenter', () => {
                    setHoverImgSize(mainImg, hoverImg, row);
                    hoverImg.style.opacity = 1;
                });

                row.addEventListener('mouseleave', () => {
                    hoverImg.style.opacity = 0;
                });

                // 在页面加载和窗口大小改变时设置悬停图片的尺寸
                window.addEventListener('load', () => setHoverImgSize(mainImg, hoverImg, row));
                window.addEventListener('resize', () => setHoverImgSize(mainImg, hoverImg, row));
            });
        }
    });
    //网页动效
    (function () {
        const animationObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    observer.unobserve(entry.target);
                    setTimeout(() => {
                        entry.target.classList.add('is-visible');
                    }, parseInt(entry.target.dataset.delay) || 0);
                }
            });
        }, {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
        });

        function addAnimation(selector, animationClass, delay) {
            document.querySelectorAll(selector).forEach(el => {
                el.classList.add(animationClass);
                el.dataset.delay = delay;
                animationObserver.observe(el);
            });
        }

        function initializeAnimations() {
            // 其他元素按顺序出现
            addAnimation('h1', 'fade-in-up-center', 100);
            addAnimation('#tagline', 'fade-in-up-center', 400);
            //addAnimation('.project-description', 'fade-in-up', 500);

            addAnimation('h2', 'fade-in-up', 200);
            addAnimation('.h2-tagline', 'fade-in-up', 300);

            addAnimation('.tool-description', 'fade-in-up', 400);

            // 区分 .project-row 和 .project-row.reverse
            document.querySelectorAll('.project-row').forEach((row, index) => {
                if (row.classList.contains('reverse')) {
                    row.classList.add('fade-in-right');
                } else {
                    row.classList.add('fade-in-left');
                }
                row.dataset.delay = 100 + index * 100;
                animationObserver.observe(row);
            });

            // 图片动画
            document.querySelectorAll('.img-gallery').forEach((gallery, galleryIndex) => {
                gallery.querySelectorAll('a').forEach((img, imgIndex) => {
                    img.classList.add('fade-in-up');
                    img.dataset.delay = 0 + galleryIndex * 100 + imgIndex * 100;
                    animationObserver.observe(img);
                });
            });
            
            // 添加对 marmoset-container 的处理
            document.querySelectorAll('.marmoset-container').forEach((container, index) => {
                container.classList.add('fade-in-up');
                container.dataset.delay = 100 + 6 * 100;
                animationObserver.observe(container);
            });
        }

        // 初始化动画
        window.addEventListener('load', initializeAnimations);

        // 处理移动设备
        if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            const meta = document.createElement('meta');
            meta.name = 'viewport';
            meta.content = 'width=device-width, initial-scale=0.65, user-scalable=no';
            document.getElementsByTagName('head')[0].appendChild(meta);
        }
    })();

</script>

</html>